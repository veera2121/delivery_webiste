{% extends "base.html" %}
{% block meta_robots %}
<meta name="robots" content="noindex, nofollow">
{% endblock %}

{% block title %}Login / Sign Up{% endblock %}

{% block content %} 



<div class="form_main">
  <div class="heading">Welcome</div>
  <div class="sub">Login or Sign Up with your Mobile</div>

  <!-- ================= LOGIN ================= -->
  <form method="POST" action="{{ url_for('users.login') }}">
    <div class="inputContainer">
      <input class="inputField" type="text" name="mobile" placeholder="Mobile Number" required>
    </div>
    <div class="inputContainer">
      <input class="inputField" type="text" name="name" placeholder="Your Name" required>
    </div>
    <!-- Hidden field to indicate login -->
    <input type="hidden" name="is_new_user" value="0">

    <!-- ðŸ”¹ Pass next_page and restaurant_id for redirect -->
    <input type="hidden" name="next" value="{{ next or '' }}">
    <input type="hidden" name="restaurant_id" value="{{ restaurant_id or '' }}">

    <button id="button" type="submit">Login</button>
</form>

<!-- ================= SIGNUP ================= -->
<form method="POST" action="{{ url_for('users.login') }}">
    <div class="inputContainer">
      <input class="inputField" type="text" name="mobile" placeholder="Mobile Number" required>
    </div>
    <div class="inputContainer">
      <input class="inputField" type="text" name="name" placeholder="Full Name" required>
    </div>
    <div class="inputContainer">
      <input class="inputField" type="email" name="email" placeholder="Email Address (optional)">
    </div>
    <!-- Hidden field to indicate signup -->
    <input type="hidden" name="is_new_user" value="1">

    <!-- ðŸ”¹ Pass next_page and restaurant_id for redirect -->
    <input type="hidden" name="next" value="{{ next or '' }}">
    <input type="hidden" name="restaurant_id" value="{{ restaurant_id or '' }}">

    <button id="button" type="submit">Create Account</button>
</form>


  <!-- ================= FLASH MESSAGES ================= -->
  {% for msg in get_flashed_messages() %}
    <div class="flash">{{ msg }}</div>
  {% endfor %}

  <!-- ================= COMMENTED OUT OTP ELEMENTS ================= -->
  {# 
  <div class="sub">OTP sent to {{ mobile }}</div>
  <form method="POST" action="{{ url_for('users.verify_otp') }}">
      <input type="text" name="otp" placeholder="Enter OTP" required>
      <button type="submit">VERIFY</button>
  </form>
  <div class="timer">Resend OTP in <span id="time">30</span>s</div>
  <form id="resendForm" method="POST" action="{{ url_for('users.resend_otp') }}">
      <input type="hidden" name="mobile" value="{{ mobile }}">
      <button id="resendBtn" disabled>Resend OTP</button>
  </form>
  <script>
      // OTP timer and resend JS removed
  </script>
  #}
</div>

<style>
/* ===== PAGE CENTER ===== */
body {
  margin: 0;
  height: 100vh;
  background: #f4f6f8;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
}

/* ===== FORM STYLING ===== */
.form_main {
  width: 280px;
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: #fff;
  padding: 30px;
  box-shadow: 0 0 40px rgba(0,0,0,.06);
  border-radius: 12px;
  position: relative;
}

.heading {
  font-size: 1.6em;
  font-weight: 900;
  margin-bottom: 5px;
}

.sub {
  font-size: .85em;
  font-weight: 700;
  color: #000000;
  margin: 10px 0;
}

.inputContainer {
  width: 100%;
  margin-bottom: 10px;
}

.inputField {
  width: 100%;
  height: 36px;
  background: transparent;
  border: none;
  border-bottom: 2px solid #aaa;
  font-size: .9em;
  padding-left: 8px;
}

.inputField:focus {
  outline: none;
  border-bottom: 2px solid rgb(162, 104, 255);
}

#button {
  width: 100%;
  border: none;
  background-color: rgb(162, 104, 255);
  height: 36px;
  color: #fff;
  font-size: .85em;
  letter-spacing: 1px;
  margin-top: 10px;
  cursor: pointer;
  border-radius: 6px;
}

#button:hover {
  background-color: rgb(126, 84, 255);
}

.flash {
  margin-top: 8px;
  font-size: .75em;
  color: red;
  font-weight: 900;
  text-align: center;
}
</style>

{% endblock %}
